<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>如何用Angular6创建各种动画效果 | 语霖SIGMA</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/logo.png">
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <meta name="description" content="Just playing around">
    <link rel="preload" href="/assets/css/0.styles.a54542af.css" as="style"><link rel="preload" href="/assets/js/app.e6d96ba3.js" as="script"><link rel="preload" href="/assets/js/2.0791ed77.js" as="script"><link rel="preload" href="/assets/js/20.c81e257a.js" as="script"><link rel="prefetch" href="/assets/js/10.92df5b77.js"><link rel="prefetch" href="/assets/js/11.96870174.js"><link rel="prefetch" href="/assets/js/12.d9f7f2c0.js"><link rel="prefetch" href="/assets/js/13.2551456e.js"><link rel="prefetch" href="/assets/js/14.e192d8a7.js"><link rel="prefetch" href="/assets/js/15.71138a4e.js"><link rel="prefetch" href="/assets/js/16.510480be.js"><link rel="prefetch" href="/assets/js/17.84f10469.js"><link rel="prefetch" href="/assets/js/18.bdf696ae.js"><link rel="prefetch" href="/assets/js/19.6e756a02.js"><link rel="prefetch" href="/assets/js/21.77b1593c.js"><link rel="prefetch" href="/assets/js/22.483ab6ad.js"><link rel="prefetch" href="/assets/js/23.f48cd6c3.js"><link rel="prefetch" href="/assets/js/24.54f3764a.js"><link rel="prefetch" href="/assets/js/25.a62a19a3.js"><link rel="prefetch" href="/assets/js/26.74abb19d.js"><link rel="prefetch" href="/assets/js/27.83dec5ea.js"><link rel="prefetch" href="/assets/js/28.b6f9ccee.js"><link rel="prefetch" href="/assets/js/29.1d6f9f7c.js"><link rel="prefetch" href="/assets/js/3.98b924d5.js"><link rel="prefetch" href="/assets/js/30.7060825b.js"><link rel="prefetch" href="/assets/js/31.1b7abb99.js"><link rel="prefetch" href="/assets/js/32.3d4a8425.js"><link rel="prefetch" href="/assets/js/33.157c07f5.js"><link rel="prefetch" href="/assets/js/34.e5f937da.js"><link rel="prefetch" href="/assets/js/35.bd673677.js"><link rel="prefetch" href="/assets/js/36.f5ce9364.js"><link rel="prefetch" href="/assets/js/37.afde2df7.js"><link rel="prefetch" href="/assets/js/38.a3598165.js"><link rel="prefetch" href="/assets/js/39.fa84fcc2.js"><link rel="prefetch" href="/assets/js/4.bf7651fa.js"><link rel="prefetch" href="/assets/js/40.898bd902.js"><link rel="prefetch" href="/assets/js/41.6ad6288d.js"><link rel="prefetch" href="/assets/js/42.dc495217.js"><link rel="prefetch" href="/assets/js/43.c086458b.js"><link rel="prefetch" href="/assets/js/44.0fcf60b2.js"><link rel="prefetch" href="/assets/js/45.c3a034b3.js"><link rel="prefetch" href="/assets/js/46.98578bb7.js"><link rel="prefetch" href="/assets/js/47.7f2b46b9.js"><link rel="prefetch" href="/assets/js/48.df840d42.js"><link rel="prefetch" href="/assets/js/49.c589fa2e.js"><link rel="prefetch" href="/assets/js/5.3b2922b4.js"><link rel="prefetch" href="/assets/js/50.8c2ac094.js"><link rel="prefetch" href="/assets/js/51.8155af67.js"><link rel="prefetch" href="/assets/js/52.d3c055cf.js"><link rel="prefetch" href="/assets/js/53.ba265aac.js"><link rel="prefetch" href="/assets/js/54.d89da62c.js"><link rel="prefetch" href="/assets/js/55.10611c15.js"><link rel="prefetch" href="/assets/js/56.89f24512.js"><link rel="prefetch" href="/assets/js/57.3b9135a1.js"><link rel="prefetch" href="/assets/js/58.c1a593c1.js"><link rel="prefetch" href="/assets/js/59.7a60587e.js"><link rel="prefetch" href="/assets/js/6.3d131d85.js"><link rel="prefetch" href="/assets/js/60.952e8898.js"><link rel="prefetch" href="/assets/js/61.691fce4b.js"><link rel="prefetch" href="/assets/js/62.4a18d703.js"><link rel="prefetch" href="/assets/js/7.cf350091.js"><link rel="prefetch" href="/assets/js/8.ae357278.js"><link rel="prefetch" href="/assets/js/9.152334c3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a54542af.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><div class="header"><div class="header-placeholder"></div> <div id="header" class="header page-wrapper" data-v-1103c5b4><div class="page ant-row" data-v-1103c5b4><div class="ant-col ant-col-sm-24 ant-col-md-6" data-v-1103c5b4><a href="/" class="logo" data-v-1103c5b4><svg t="1594620624756" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3628" width="30" height="30" class="icon" data-v-6cd74b85 data-v-1103c5b4><path d="M848 704h-96a48 48 0 0 0-48 46.88V960h128a64 64 0 0 0 64-64v-144a48 48 0 0 0-48-48z m-16-640h-128v209.12A48 48 0 0 0 752 320h96a48 48 0 0 0 48-48V128a64 64 0 0 0-64-64z" opacity=".4" p-id="3629" fill="#ffffff" data-v-6cd74b85></path> <path d="M704 272v-16H412.48l218.18 256-218.18 256H704v-17.12V960H232a104 104 0 0 1-84-165.28L393.3 512 148 229.2A104 104 0 0 1 232 64h472v208z" p-id="3630" fill="#ffffff" data-v-6cd74b85></path></svg> <span class="logo-text" data-v-1103c5b4>SIGMA</span></a></div> <div class="ant-col ant-col-sm-0 ant-col-md-18" data-v-1103c5b4><div class="menu" data-v-1103c5b4><ul role="menu" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light" data-v-1103c5b4><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item" data-v-1103c5b4><a href="/" class="router-link-active" data-v-1103c5b4>首页</a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item" data-v-1103c5b4><a href="/posts" class="router-link-active" data-v-1103c5b4>博客</a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item" data-v-1103c5b4><a href="/about" data-v-1103c5b4>关于我</a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <a href="https://github.com/tinyking" target="_blank" class="gitbtn" data-v-1103c5b4>Github</a></div></div></div></div></div> <div class="main-container"><div class="main-content content__default"><h1 id="如何用angular-6创建各种动画效果"><a href="#如何用angular-6创建各种动画效果" class="header-anchor">#</a> 如何用Angular 6创建各种动画效果</h1> <h2 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h2> <p>就技术角度而言，动画可以被定义为从初始状态到最终状态的转换过程。如今它已是各种Web应用不可或缺的组成部分。通过动画，我们不仅能创建出各种酷炫的UI，同时它们也能增加应用程序的趣味性。因此，设计精美的动画在吸引用户眼球的同时，也增强了他们的浏览体验。</p> <p>Angular能够让我们创建出具有原生表现效果的动画。我们将通过本文学习到如何使用Angular 6来创建各种动画效果。</p> <h2 id="准备工作"><a href="#准备工作" class="header-anchor">#</a> 准备工作</h2> <p>安装vs code和 Angular cli。</p> <h2 id="源代码"><a href="#源代码" class="header-anchor">#</a> 源代码</h2> <p><a href="https://stackblitz.com/edit/tk-angular-animations-01" target="_blank" rel="noopener noreferrer">https://stackblitz.com/edit/tk-angular-animations-01<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="理解angular动画的不同状态"><a href="#理解angular动画的不同状态" class="header-anchor">#</a> 理解Angular动画的不同状态</h2> <p>动画是某个元素从一种状态向另一种状态的转变，Angular为单个元素定义出了三种不同的状态。</p> <ol><li>void状态：void状态表示某个元素处于不是DOM一部分的状态。当一个元素被创建且尚未放到DOM中、或者该元素从DOM中移除时，就处于该状态。此状态特别实用，特别是当我们想通过添加或删除DOM中的元素，来创建动画的时候，我们在代码中使用关键字void来定义这种状态。</li> <li>wildcard状态：又称元素的默认状态。不管当前的动画状态如何，各种样式都用这种状态来定义元素。我们在代码中用符号*来定义这种状态。</li> <li>Custom状态：元素的这种状态需要在代码中被明确定义。我们在代码中可以使用任何自定义的名称来表示这种状态。</li></ol> <h2 id="动画转换定时"><a href="#动画转换定时" class="header-anchor">#</a> 动画转换定时</h2> <p>我们在自己的应用中，通过定义动画转换的定时，来显示从一个状态过度到另一个状态。Angular为我们提供了如下三种与时间相关的属性：</p> <ol><li>持续时间(Duration)</li></ol> <p>此属性表示我们的动画从开始(初始状态)到完成(最终状态)所需的时间。我们可以用以下三种方式来定义动画的持续时间：</p> <ul><li>使用一个整数值，来表示以毫秒为单位的时间，例如：500</li> <li>使用一个字符串值，来表示以毫秒为单位的时间，例如：’500ms’</li> <li>使用一个字符串值，来表示以秒为单位的时间。例如：’0.5’</li></ul> <ol start="2"><li>延迟(Delay)</li></ol> <p>此属性代表动画从触发到和实际转换开始之间的时间间隔。该属性遵循与上述持续时间相同的语法规则。要定义延迟，我们需要在持续时间值的后面，以字符串的形式添加延迟的数值，即：'Duration Delay'。例如' 0.3s 500ms’，表示转换将等待500毫秒，然后运行0.3秒。</p> <ol start="3"><li>滑动(Easing)</li></ol> <p>此属性表示动画在其执行过程中是如何被加速或减速的。我们可以在持续时间和延迟的字符串后面，添加第三个变量。当然，如果延迟数值不存在的话，那么Easing将成为第二个数值。这同样也是一个可选属性。例如：</p> <ul><li>'0.3s 500ms ease-in'。这意味着转换将等待500毫秒，然后运行0.3秒(300毫秒)，实现滑入的效果。</li> <li>'300ms ease-out'。这意味着转换将运行300毫秒(0.3秒)，实现滑出的效果。</li></ul> <h2 id="创建angular-6应用"><a href="#创建angular-6应用" class="header-anchor">#</a> 创建Angular 6应用</h2> <p>请在您的计算机上打开命令提示行，并执行以下命令集：</p> <ul><li>mkdir ngAnimationDemo</li> <li>cd ngAnimationDemo</li> <li>ng new ngAnimation</li></ul> <p>这些命令将创建一个名为ngAnimationDemo的目录，然后在该目录内创建一个名为ngAnimation的Angular应用。</p> <p>请使用Visual Studio Code打开ngAnimation应用。接着我们将创建自己的组件。</p> <p>请依次进入View &gt;&gt; Integrated Terminal，这将打开Visual Studio Code的终端窗口。</p> <p>请执行以下命令，以创建相应的组件：</p> <div class="language- extra-class"><pre class="language-text"><code>ng g c animationdemo 
</code></pre></div><p>它将在/src/app文件夹内创建我们的组件--animationdemo。</p> <p>为了用到Angular动画，我们需要在应用中导入特定的动画模块--BrowserAnimationsModule。请打开app.module.ts文件，并添加如下的导入定义：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserAnimationsModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/platform-browser/animations'</span><span class="token punctuation">;</span>  
<span class="token comment">// other import definitions  </span>
@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span> imports<span class="token operator">:</span> <span class="token punctuation">[</span>BrowserAnimationsModule <span class="token comment">// other imports]})  </span>
</code></pre></div><h2 id="理解angular动画的语法"><a href="#理解angular动画的语法" class="header-anchor">#</a> 理解Angular动画的语法</h2> <p>下面，我们在组件的元数据中编写动画代码。其语法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code>@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
<span class="token comment">// other component properties. </span>
  animations<span class="token operator">:</span> <span class="token punctuation">[</span> 
    <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'triggerName'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> 
      <span class="token function">state</span><span class="token punctuation">(</span><span class="token string">'stateName'</span><span class="token punctuation">,</span> <span class="token function">style</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
      <span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'stateChangeExpression'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>Animation Steps<span class="token punctuation">]</span><span class="token punctuation">)</span> 
    <span class="token punctuation">]</span> 
  <span class="token punctuation">]</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre></div><p>此处，我们用到了名为animations的属性。该属性的输入是一个阵列，此阵列包含一个或多个“触发器”。同时，每个触发器都带有唯一的名称、和用来定义动画的状态和各种转换的具体实现。</p> <p>另外，每一个状态函数都会通过“stateName”来唯一地识别其状态、并用样式函数来显示在该状态下的元素样式。</p> <p>当然，每个转换函数也都通过stateChangeExpression，来定义元素状态转换、并定义动画的不同步骤所对应的阵列，从而能够显示出转换是如何发生的。在此，我们就可以用逗号分隔的数值，来将多个触发器函数包括到动画的属性之中。</p> <p>由于这些功能(触发、状态、和转换)都被定义在@angular/animations模块之中，因此，我们需要在自己的组件导入该模块。</p> <p>为了将动画应用到某个元素之上，我们需要在元素的定义中包含触发器的名称，即：在元素的标签里使用@后面加触发器名称的格式。对应的代码示例如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@changeSize</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  
</code></pre></div><p>这是将触发器changeSize应用到元素的上。</p> <p>下面，让我们创建更多的动画，以更好地理解Angular的动画概念吧。</p> <p>更改大小的动画</p> <p>我们将创建一个动画，来实现一键改变的大小。</p> <p>请打开animationdemo.component.ts文件，将如下代码添加到导入定义之中。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> trigger<span class="token punctuation">,</span> state<span class="token punctuation">,</span> style<span class="token punctuation">,</span> animate<span class="token punctuation">,</span> transition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/animations'</span><span class="token punctuation">;</span> 
</code></pre></div><p>在组件的元数据中添加如下的动画属性定义。</p> <div class="language-ts extra-class"><pre class="language-ts"><code>animations<span class="token operator">:</span> <span class="token punctuation">[</span> 
  <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'changeDivSize'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> 
    <span class="token function">state</span><span class="token punctuation">(</span><span class="token string">'initial'</span><span class="token punctuation">,</span> <span class="token function">style</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
      backgroundColor<span class="token operator">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span> 
      width<span class="token operator">:</span> <span class="token string">'100px'</span><span class="token punctuation">,</span> 
      height<span class="token operator">:</span> <span class="token string">'100px'</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token function">state</span><span class="token punctuation">(</span><span class="token string">'final'</span><span class="token punctuation">,</span> <span class="token function">style</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
      backgroundColor<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> 
      width<span class="token operator">:</span> <span class="token string">'200px'</span><span class="token punctuation">,</span> 
      height<span class="token operator">:</span> <span class="token string">'200px'</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'initial=&gt;final'</span><span class="token punctuation">,</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token string">'1500ms'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'final=&gt;initial'</span><span class="token punctuation">,</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token string">'1000ms'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
<span class="token punctuation">]</span>  

</code></pre></div><p>在此，我们定义了一个触发器—changeDivSize，而且该触发器里的两个功能函数。该元素在“初始”状态时呈现绿色，并随着宽度和高度的增加，在“最终”状态时呈现为红色。</p> <p>同时，我们定义了状态的转换规则：从“初始”态到“最终”态将持续1500毫秒，而从“最终”态返回“初始”态则为1000毫秒。</p> <p>为了改变元素的状态，我们在组件的类定义中定义了一个功能函数。我们将如下代码包含在AnimationdemoComponent类中：</p> <div class="language-ts extra-class"><pre class="language-ts"><code>currentState <span class="token operator">=</span> <span class="token string">'initial'</span><span class="token punctuation">;</span> 
<span class="token function">changeState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">this</span><span class="token punctuation">.</span>currentState <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentState <span class="token operator">===</span> <span class="token string">'initial'</span> <span class="token operator">?</span> <span class="token string">'final'</span> <span class="token operator">:</span> <span class="token string">'initial'</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>  
</code></pre></div><p>此处，我们定义了一个changeState方法，来切换元素的状态。</p> <p>请打开animationdemo.component.html文件，并添加以下代码：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Change the div size<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">(click)</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeState()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Change Size<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">[@changeDivSize]</span><span class="token attr-value"><span class="token punctuation">=</span>currentState</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span> 
</code></pre></div><p>我们定义了一个按钮，来调用点击时的changeState函数。由于我们前面已经定义了元素，并对它应用了changeDivSize动画触发器，因此当按钮被点击时，它会更新元素的状态，其大小则会伴随着转换效果而发生变化。</p> <p>在执行该应用之前，我们也需要将引用包含在app.component.html文件内的Animationdemo组件中。</p> <p>打开app.component.html文件，您会发现该文件中已包含了一些默认的HTML代码。请删除所有的代码，并按照下图所示放置组件的选择器：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-animationdemo</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app-animationdemo</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><p>请在Visual Studio Code的终端窗口里运行ng serve命令，以执行该代码。运行完毕后，它会提示您在浏览器中打开http://localhost:4200。随后，您就会在浏览器中看到如下点击按钮的动画效果。</p> <h2 id="气球动画效果"><a href="#气球动画效果" class="header-anchor">#</a> 气球动画效果</h2> <p>在前面的动画示例中，转化仅发生在两个方向。而在本节中，我们将学习如何改变所有方向上的尺寸。这与气球的充、放气比较类似，故称为气球动画效果。</p> <p>请在动画属性中添加如下的触发器定义。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'balloonEffect'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> 
   <span class="token function">state</span><span class="token punctuation">(</span><span class="token string">'initial'</span><span class="token punctuation">,</span> <span class="token function">style</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
     backgroundColor<span class="token operator">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span> 
     transform<span class="token operator">:</span> <span class="token string">'scale(1)'</span> 
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
   <span class="token function">state</span><span class="token punctuation">(</span><span class="token string">'final'</span><span class="token punctuation">,</span> <span class="token function">style</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
     backgroundColor<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> 
     transform<span class="token operator">:</span> <span class="token string">'scale(1.5)'</span> 
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
   <span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'final=&gt;initial'</span><span class="token punctuation">,</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token string">'1000ms'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
   <span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'initial=&gt;final'</span><span class="token punctuation">,</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token string">'1500ms'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
 <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
</code></pre></div><p>在此，我们使用转换属性来更改所有方向的尺寸大小。当该元素的状态发生变化时转换随即发生。</p> <p>请在app.component.html文件中添加如下HTML代码。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Balloon Effect<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">(click)</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeState()<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name">  
  <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token property">margin</span><span class="token punctuation">:</span> 3rem<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> green</span><span class="token punctuation">&quot;</span></span> 
  <span class="token attr-name">[@balloonEffect]</span><span class="token attr-value"><span class="token punctuation">=</span>currentState</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><p>在此，我们定义了一个div，并通过CSS样式来定义成一个圆圈。我们将通过点击div去调用changeState，从而实现元素状态的切换。</p> <p>下图便是该动画在浏览器中的运行效果：</p> <p>淡入和淡出动画</p> <p>有时候，我们需要在显示动画的同时，对DOM添加或移除元素。下面，我们来看看如何通过对一个列表添加或删除条目，以实现淡入和淡出的动画效果。</p> <p>请将如下代码插入AnimationdemoComponent类的定义之中。</p> <div class="language-ts extra-class"><pre class="language-ts"><code>listItem <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
list_order<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> 
<span class="token function">addItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">var</span> listitem <span class="token operator">=</span> <span class="token string">&quot;ListItem &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list_order<span class="token punctuation">;</span> 
  <span class="token keyword">this</span><span class="token punctuation">.</span>list_order<span class="token operator">++</span><span class="token punctuation">;</span> 
  <span class="token keyword">this</span><span class="token punctuation">.</span>listItem<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>listitem<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
<span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">this</span><span class="token punctuation">.</span>listItem<span class="token punctuation">.</span>length <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
</code></pre></div><p>请在该动画的属性中添加如下的触发器定义。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'fadeInOut'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> 
  <span class="token function">state</span><span class="token punctuation">(</span><span class="token string">'void'</span><span class="token punctuation">,</span> <span class="token function">style</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
    opacity<span class="token operator">:</span> <span class="token number">0</span> 
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
  <span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'void &lt;=&gt; *'</span><span class="token punctuation">,</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  
</code></pre></div><p>在此，我们定义了触发器fadeInOut。当该元素被添加到DOM时，它的状态就从void转换为wildcard，我们表示为void =&gt; <em>。而当该元素从DOM删除时，它的状态就从wildcard转换为void，我们表示为</em> =&gt; void。</p> <p>我们给动画的不同方向使用相同的动画定时，其语法为&lt;=&gt;。正如该触发器所定义的，动画从void =&gt; * 和 * =&gt; void，都需要1000毫秒才能完成。</p> <p>请在app.component.html文件中添加如下HTML代码。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Fade-In and Fade-Out animation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">(click)</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>addItem()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Add List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">(click)</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>removeItem()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Remove List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> 20px</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">*ngFor</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>let list of listItem<span class="token punctuation">&quot;</span></span> <span class="token attr-name">[@fadeInOut]</span><span class="token punctuation">&gt;</span></span> 
      {{list}} 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><p>在此，我们定义了两个按钮来添加和删除条目。我们将fadeInOut触发器与元素绑定，以实现在对DOM进行添加、删除时，能够出现淡入和淡出的效果。</p> <p>下图便是该动画在浏览器中的运行效果：</p> <p>进入和离开动画</p> <p>此外，我们还能够通过对DOM的添加，实现某个元素从左边进入屏幕;而在删除时，能让该元素从右边离开屏幕。</p> <p>由于从void =&gt; * 和 * =&gt; void 的转换十分常见。因此，Angular为这些动画提供了别名机制：</p> <ul><li>对于 void =&gt; * ，我们可以用':enter'</li> <li>对于 * =&gt; void ，我们可以用':leave'</li></ul> <p>这两个别名使得此类转换更具可读性，也更容易被理解。</p> <p>请在动画的属性中添加如下触发器的定义。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'EnterLeave'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> 
  <span class="token function">state</span><span class="token punctuation">(</span><span class="token string">'flyIn'</span><span class="token punctuation">,</span> <span class="token function">style</span><span class="token punctuation">(</span><span class="token punctuation">{</span> transform<span class="token operator">:</span> <span class="token string">'translateX(0)'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
  <span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">':enter'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> 
    <span class="token function">style</span><span class="token punctuation">(</span><span class="token punctuation">{</span> transform<span class="token operator">:</span> <span class="token string">'translateX(-100%)'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token function">animate</span><span class="token punctuation">(</span><span class="token string">'0.5s 300ms ease-in'</span><span class="token punctuation">)</span> 
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
  <span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">':leave'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> 
    <span class="token function">animate</span><span class="token punctuation">(</span><span class="token string">'0.3s ease-out'</span><span class="token punctuation">,</span> <span class="token function">style</span><span class="token punctuation">(</span><span class="token punctuation">{</span> transform<span class="token operator">:</span> <span class="token string">'translateX(100%)'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
  <span class="token punctuation">]</span><span class="token punctuation">)</span> 
<span class="token punctuation">]</span><span class="token punctuation">)</span>  
</code></pre></div><p>在此，我们定义了触发器EnterLeave。那么':enter'的转换需要等待300毫秒，然后运行0.5秒，并实现滑入的效果;而':leave'的转换只运行0.3秒，实现滑出的效果。</p> <p>请在app.component.html文件中添加如下HTML代码。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Enter and Leave animation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">(click)</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>addItem()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Add List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">(click)</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>removeItem()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Remove List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> 20px</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">*ngFor</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>let list of listItem<span class="token punctuation">&quot;</span></span> <span class="token attr-name">[@EnterLeave]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>flyIn'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 
      {{list}} 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><p>在此，我们定义了两个按钮来对列表添加和删除条目。我们将EnterLeave触发器与元素绑定，以实现在对DOM进行添加、删除时，出现滑入和滑出的效果。</p> <p>下图便是该动画在浏览器中的运行效果：</p> <h2 id="结论"><a href="#结论" class="header-anchor">#</a> 结论</h2> <p>综上所述，我们针对Angular 6的动画效果，探讨了动画状态和转换的概念，也通过一个应用示例展示了实际的动画代码与效果。</p></div></div> <footer id="footer" data-v-6205c9ed><div class="footer-wrap" data-v-6205c9ed><div class="ant-row" data-v-6205c9ed><div class="ant-col" data-v-6205c9ed><div class="footer-center" data-v-6205c9ed><h2 data-v-6205c9ed><img src="https://gw.alipayobjects.com/zos/rmsportal/nBVXkrFdWHxbZlmMbsaH.svg" alt="AFX Cloud" class="title-icon" data-v-6205c9ed>
            联系方式
          </h2> <div data-v-6205c9ed><a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design-landing/issues" data-v-6205c9ed><i aria-hidden="true" class="fa fa-weibo" data-v-6205c9ed></i>
              微博
              <span data-v-6205c9ed>-</span>
              TinyKing
            </a></div> <div data-v-6205c9ed><a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design-landing/issues" data-v-6205c9ed><i aria-hidden="true" class="fa fa-github" data-v-6205c9ed></i>
              Github
              <span data-v-6205c9ed>-</span>
              TinyKing
            </a></div> <div data-v-6205c9ed><a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design-landing/issues" data-v-6205c9ed><i aria-hidden="true" class="fa fa-weixin" data-v-6205c9ed></i>
              微信
              <span data-v-6205c9ed>-</span>
              TinyKing
            </a></div> <div data-v-6205c9ed><a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design-landing/issues" data-v-6205c9ed><span style="top:2px;display:inline-block;position:relative;" data-v-6205c9ed><svg t="1594374590421" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1288" width="16" height="16" class="icon" data-v-6205c9ed><path d="M512 1024C229.236 1024 0 794.764 0 512S229.236 0 512 0s512 229.236 512 512-229.236 512-512 512zM382.138 267.52s-36.212 2.095-48.989 24.483c-12.8 22.365-54.318 137.379-54.318 137.379s13.847 6.377 37.282-10.66c23.436-17.035 30.883-46.847 30.883-46.847l42.59-2.118 1.07 121.39s-73.495-1.07-88.413 0c-14.895 1.048-23.412 40.449-23.412 40.449h111.825s-9.588 67.095-38.353 116.084c-28.742 48.99-83.06 87.32-83.06 87.32s39.423 15.964 77.73-6.4c38.354-22.343 66.63-120.693 66.63-120.693l89.926 110.057s8.192-52.387-1.466-67.189c-9.659-14.778-62.208-74.286-62.208-74.286l-22.947 20.247 16.337-65.117H531.2s0-38.354-19.153-40.495c-19.177-2.094-78.802 0-78.802 0V371.898h88.39s-1.07-39.4-18.106-39.4H359.773l22.342-64.955z m169.984 61.184v358.563h36.003l13.103 45.01 63.348-45.01h89.065V328.704H552.122z" fill="#ffffff" p-id="1289" data-v-6205c9ed></path> <path d="M594.781 368.64h117.9v277.876H670.79l-53.365 40.262-11.636-40.262h-11.008V368.64z" fill="#ffffff" p-id="1290" data-v-6205c9ed></path></svg></span>
              知乎
              <span data-v-6205c9ed>-</span>
              TinyKing
            </a></div></div></div></div></div> <div class="bottom-bar" data-v-6205c9ed>~语霖~</div></footer></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e6d96ba3.js" defer></script><script src="/assets/js/2.0791ed77.js" defer></script><script src="/assets/js/20.c81e257a.js" defer></script>
  </body>
</html>
