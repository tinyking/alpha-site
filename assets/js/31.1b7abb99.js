(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{684:function(e,a,t){"use strict";t.r(a);var s=t(68),n=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[e._v("#")]),e._v(" 安装")]),e._v(" "),t("p",[e._v("解压文件")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("tar")]),e._v(" -xvf keepalived-x.x.x.tar.gz\n")])])]),t("p",[e._v("进入文件夹"),t("code",[e._v("keepalived-x.x.x")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("./configure\n\nmake && make install \n")])])]),t("p",[e._v("在安装过程中需要注意以下几点：")]),e._v(" "),t("ul",[t("li",[e._v("gcc环境")]),e._v(" "),t("li",[e._v("openssl环境")]),e._v(" "),t("li",[e._v("root权限")])]),e._v(" "),t("h2",{attrs:{id:"配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[e._v("#")]),e._v(" 配置")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# cp /usr/local/etc/rc.d/init.d/keepalived /etc/rc.d/init.d/ ")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# cp /usr/local/etc/sysconfig/keepalived /etc/sysconfig/ ")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# mkdir /etc/keepalived  ")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# cp /usr/local/etc/keepalived/keepalived.conf /etc/keepalived/ ")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# cp /usr/local/sbin/keepalived /usr/sbin/ ")]),e._v("\n")])])]),t("p",[e._v("做成系统启动服务方便管理.")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# vi /etc/rc.local   ")]),e._v("\n/etc/init.d/keepalived start \n")])])]),t("p",[e._v("增加上面一行。")]),e._v(" "),t("p",[e._v("修改配置"),t("code",[e._v("/etc/keepalived/keepalived.conf")])]),e._v(" "),t("div",{staticClass:"language-config extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("! Configuation File for keepalived\n\nglobal_defs {\n    notification_email {\n        acassen@firewall.loc    # 邮件地址，当异常时发邮件通知。可以是多个，每个一行\n        \n    }\n    notification_email_from Alexandre.Cassen@firewall.loc\n    smtp_server 192.168.200.1\n    smtp_connect_timeout 30\n    router_id LVS_DEVEL\n    vrrp_skip_check_adv_addr\n    vrrp_strict\n}\n\nvrrp_instance VI_1 {\n    state MASTER    # 从机设为BACKUP\n    interface   eth0   # 网卡接口\n    mcast_src_ip 10.0.0.131  # 默认没有这项，加上这项后服务好用了\n    priority  100  # 优先级，从机小与主机\n    advert_int 1  \n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        10.0.0.111   # 虚拟ip设置，可以是多个，主从一致\n    }\n}\n\n")])])]),t("blockquote",[t("p",[e._v("参考文档 http://wenku.baidu.com/view/8e38022d2af90242a895e532.html")])])])}),[],!1,null,null,null);a.default=n.exports}}]);