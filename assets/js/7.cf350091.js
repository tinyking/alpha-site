(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{719:function(t,s,a){"use strict";a.r(s);var n=a(68),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä¸€ä¸ªåŸºäºåç«¯APIéªŒè¯å€¼çš„éªŒè¯å™¨ã€‚ä¸ºæ­¤ï¼ŒAngularæä¾›äº†ä¸€ç§å®šä¹‰è‡ªå®šä¹‰å¼‚æ­¥éªŒè¯å™¨çš„ç®€ä¾¿æ–¹æ³•ã€‚")]),t._v(" "),a("p",[t._v("æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä¸ºAngularåº”ç”¨ç¨‹åºåˆ›å»ºè‡ªå®šä¹‰å¼‚æ­¥éªŒè¯å™¨ã€‚")]),t._v(" "),a("p",[t._v("é€šå¸¸ä½ ä¼šè°ƒç”¨ä¸€ä¸ªçœŸæ­£çš„åç«¯ï¼Œä½†æ˜¯åœ¨è¿™é‡Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„JSONæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨HttpæœåŠ¡æ¥è°ƒç”¨å®ƒã€‚å¦‚æœæ­£åœ¨ä½¿ç”¨Angular CLIï¼Œåˆ™å¯ä»¥å°†JSONæ–‡ä»¶æ”¾åœ¨/assetsæ–‡ä»¶å¤¹ä¸­ï¼Œå®ƒå°†è‡ªåŠ¨å¯ç”¨ï¼›")]),t._v(" "),a("p",[a("code",[t._v("/assets/users.json")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Paul"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"email"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"paul@example.com"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Ringo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"email"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ringo@example.com"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"John"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"email"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"john@example.com"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"George"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"email"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"george@example.com"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h1",{attrs:{id:"æ³¨å†ŒæœåŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ³¨å†ŒæœåŠ¡"}},[t._v("#")]),t._v(" æ³¨å†ŒæœåŠ¡")]),t._v(" "),a("p",[t._v("æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå…·æœ‰"),a("code",[t._v("checkEmailNotTaken")]),t._v("æ–¹æ³•çš„æœåŠ¡ï¼Œè¯¥æ–¹æ³•è§¦å‘å¯¹æˆ‘ä»¬çš„JSONæ–‡ä»¶çš„http GETè°ƒç”¨ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨"),a("code",[t._v("RxJS")]),t._v("çš„å»¶è¿Ÿè¿ç®—ç¬¦æ¥æ¨¡æ‹Ÿä¸€äº›å»¶è¿Ÿï¼š")]),t._v(" "),a("p",[a("code",[t._v("signup.service.ts")])]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Injectable "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@angular/core'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Http "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@angular/http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Observable "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rxjs/Observable'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rxjs/add/operator/map'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rxjs/add/operator/filter'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rxjs/add/operator/delay'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Injectable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SignupService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Http")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkEmailNotTaken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("email"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("http\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'assets/users.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("delay")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("users")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("user")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("email "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("users")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("è¯·æ³¨æ„æˆ‘ä»¬å¦‚ä½•ç­›é€‰ä¸æä¾›ç»™æ–¹æ³•çš„ç”¨æˆ·å…·æœ‰ç›¸åŒç”µå­é‚®ä»¶çš„ç”¨æˆ·ã€‚ç„¶åæˆ‘ä»¬å†æ¬¡æ˜ å°„ç»“æœå¹¶è¿›è¡Œæµ‹è¯•ä»¥ç¡®ä¿æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªç©ºç½®å¯¹è±¡ã€‚")]),t._v(" "),a("p",[t._v("åœ¨çœŸå®åœºæ™¯ä¸­ï¼Œæ‚¨å¯èƒ½è¿˜æƒ³ä½¿ç”¨debounceTimeå’ŒdistinctUntilChangedè¿ç®—ç¬¦çš„ç»„åˆï¼Œå¦‚æˆ‘ä»¬åœ¨åˆ›å»ºå®æ—¶æœç´¢çš„å¸–å­ä¸­æ‰€è®¨è®ºçš„ã€‚å¼•å…¥ä¸€äº›è¿™æ ·çš„å»æŠ–åŠ¨å°†æœ‰åŠ©äºå°†å‘é€åˆ°åç«¯APIçš„è¯·æ±‚æ•°é‡ä¿æŒåœ¨æœ€ä½æ°´å¹³ã€‚")]),t._v(" "),a("h2",{attrs:{id:"ç»„ä»¶å’Œå¼‚æ­¥éªŒè¯å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç»„ä»¶å’Œå¼‚æ­¥éªŒè¯å™¨"}},[t._v("#")]),t._v(" ç»„ä»¶å’Œå¼‚æ­¥éªŒè¯å™¨")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çš„ç®€å•ç»„ä»¶åˆå§‹åŒ–æˆ‘ä»¬çš„ååº”å½¢å¼å¹¶å®šä¹‰æˆ‘ä»¬çš„å¼‚æ­¥éªŒè¯å™¨ï¼š"),a("em",[t._v("validateEmailNotTaken")]),t._v("ã€‚è¯·æ³¨æ„æˆ‘ä»¬çš„"),a("code",[t._v("FormBuilder.group")]),t._v("å£°æ˜ä¸­çš„è¡¨å•æ§ä»¶å¦‚ä½•å°†å¼‚æ­¥éªŒè¯å™¨ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ã€‚è¿™é‡Œæˆ‘ä»¬åªä½¿ç”¨ä¸€ä¸ªå¼‚æ­¥éªŒè¯å™¨ï¼Œä½†æ˜¯ä½ æƒ³åœ¨æ•°ç»„ä¸­åŒ…å«å¤šä¸ªå¼‚æ­¥éªŒè¯å™¨ï¼š")]),t._v(" "),a("p",[t._v("app.component.ts")]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" OnInit "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@angular/core'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  FormBuilder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  FormGroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  Validators"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  AbstractControl\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@angular/forms'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" SignupService "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./signup.service'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppComponent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OnInit")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  myForm"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" FormGroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" fb"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" FormBuilder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" signupService"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" SignupService")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ngOnInit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("myForm "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Validators"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("required"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      email"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Validators"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("required"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Validators"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("validateEmailNotTaken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("validateEmailNotTaken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("control"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" AbstractControl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signupService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkEmailNotTaken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("control"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" res "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" emailTaken"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æˆ‘ä»¬çš„éªŒè¯å™¨ä¸å…¸å‹çš„è‡ªå®šä¹‰éªŒè¯å™¨éå¸¸ç›¸ä¼¼ã€‚è¿™é‡Œæˆ‘ä»¬ç›´æ¥åœ¨ç»„ä»¶ç±»ä¸­å®šä¹‰äº†éªŒè¯å™¨è€Œä¸æ˜¯å•ç‹¬çš„æ–‡ä»¶ã€‚è¿™æ ·å¯ä»¥æ›´è½»æ¾åœ°è®¿é—®æˆ‘ä»¬æ³¨å…¥çš„æœåŠ¡å®ä¾‹ã€‚å¦è¯·æ³¨æ„æˆ‘ä»¬å¦‚ä½•ç»‘å®š"),a("strong",[t._v("æ­¤")]),t._v("å€¼ä»¥ç¡®ä¿å®ƒæŒ‡å‘ç»„ä»¶ç±»ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬è¿˜å¯ä»¥åœ¨è‡ªå·±çš„æ–‡ä»¶ä¸­å®šä¹‰æˆ‘ä»¬çš„å¼‚æ­¥éªŒè¯å™¨ï¼Œä»¥ä¾¿æ›´å®¹æ˜“åœ°é‡ç”¨å’Œåˆ†ç¦»å…³æ³¨ç‚¹ã€‚å”¯ä¸€æ£˜æ‰‹çš„éƒ¨åˆ†æ˜¯æ‰¾åˆ°ä¸€ç§æ–¹æ³•æ¥æä¾›æˆ‘ä»¬çš„æœåŠ¡å®ä¾‹ã€‚åœ¨è¿™é‡Œï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå…·æœ‰"),a("em",[t._v("createValidator")]),t._v("é™æ€æ–¹æ³•çš„ç±»ï¼Œè¯¥æ–¹æ³•æ¥æ”¶æˆ‘ä»¬çš„æœåŠ¡å®ä¾‹å¹¶è¿”å›æˆ‘ä»¬çš„éªŒè¯å™¨å‡½æ•°ï¼š")]),t._v(" "),a("p",[t._v("/validators/async-email.validator.ts")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("import { AbstractControl } from '@angular/forms';\nimport { SignupService } from '../signup.service';\n\nexport class ValidateEmailNotTaken {\n  static createValidator(signupService: SignupService) {\n    return (control: AbstractControl) => {\n      return signupService.checkEmailNotTaken(control.value).map(res => {\n        return res ? null : { emailTaken: true };\n      });\n    };\n  }\n}\n")])])]),a("p",[t._v("ç„¶åï¼Œå›åˆ°æˆ‘ä»¬çš„ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯¼å…¥"),a("em",[t._v("ValidateEmailNotTaken")]),t._v("ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™æ ·çš„éªŒè¯å™¨ï¼š")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ngOnInit() {\n  this.myForm = this.fb.group({\n    name: ['', Validators.required],\n    email: [\n      '',\n      [Validators.required, Validators.email],\n      ValidateEmailNotTaken.createValidator(this.signupService)\n    ]\n  });\n}\n")])])]),a("h2",{attrs:{id:"æ¨¡æ¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ¨¡æ¿"}},[t._v("#")]),t._v(" æ¨¡æ¿")]),t._v(" "),a("p",[t._v("åœ¨æ¨¡æ¿ä¸­ï¼Œäº‹æƒ…çœŸçš„å¾ˆç®€å•ï¼š")]),t._v(" "),a("p",[t._v("app.component.html")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<form [formGroup]="myForm">\n  <input type="text" formControlName="name">\n  <input type="email" formControlName="email">\n\n  <div *ngIf="myForm.get(\'email\').status === \'PENDING\'">\n    Checking...\n  </div>\n  <div *ngIf="myForm.get(\'email\').status === \'VALID\'">\n    ğŸ˜º Email is available!\n  </div>\n\n  <div *ngIf="myForm.get(\'email\').errors && myForm.get(\'email\').errors.emailTaken">\n    ğŸ˜¢ Oh noes, this email is already taken!\n  </div>\n</form>\n')])])]),a("p",[t._v("æ‚¨å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ ¹æ®"),a("em",[t._v("ç”µå­é‚®ä»¶")]),t._v("è¡¨å•æ§ä»¶ä¸Šstatuså±æ€§çš„å€¼æ˜¾ç¤ºä¸åŒçš„æ¶ˆæ¯ã€‚å¯¹äºå¯èƒ½çš„å€¼"),a("strong",[t._v("çŠ¶æ€")]),t._v("æ˜¯"),a("em",[t._v("VALID")]),t._v("ï¼Œ"),a("em",[t._v("INVALID")]),t._v("ï¼Œ"),a("em",[t._v("PENDING")]),t._v("å’Œ"),a("em",[t._v("ç¦ç”¨")]),t._v("ã€‚å¦‚æœå¼‚æ­¥éªŒè¯é”™è¯¯è¾“å‡ºæˆ‘ä»¬çš„"),a("em",[t._v("emailTaken")]),t._v("é”™è¯¯ï¼Œæˆ‘ä»¬ä¹Ÿä¼šæ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚")]),t._v(" "),a("p",[t._v("ä½¿ç”¨å¼‚æ­¥éªŒè¯å™¨éªŒè¯çš„è¡¨å•å­—æ®µåœ¨éªŒè¯"),a("em",[t._v("å¾…å¤„ç†")]),t._v("æ—¶ä¹Ÿå°†å…·æœ‰"),a("em",[t._v("ng-pending")]),t._v("ç±»ã€‚è¿™æ ·å¯ä»¥è½»æ¾è®¾ç½®å½“å‰å¾…éªŒè¯å­—æ®µçš„æ ·å¼ã€‚")]),t._v(" "),a("p",[t._v("âœ¨ä½ æœ‰å®ƒï¼ä½¿ç”¨åç«¯APIæ£€æŸ¥æœ‰æ•ˆæ€§çš„ç®€ä¾¿æ–¹æ³•ã€‚")])])}),[],!1,null,null,null);s.default=r.exports}}]);