(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{702:function(t,e,r){"use strict";r.r(e);var s=r(68),a=Object(s.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("p",[r("img",{attrs:{src:"https://ws1.sinaimg.cn/large/806e3151ly1fyd08s62ypj20xc0dwwmr.jpg",alt:""}})]),t._v(" "),r("h1",{attrs:{id:"创建repository"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#创建repository"}},[t._v("#")]),t._v(" 创建Repository")]),t._v(" "),r("p",[t._v("Nexus Repository Manager 3 可以用于多种类型的包管理。 因工作需要，需要配置基于Nexus 3的npm包管理。")]),t._v(" "),r("blockquote",[r("p",[t._v("Nexus默认账号: admin/admin123")])]),t._v(" "),r("p",[r("img",{attrs:{src:"https://ws1.sinaimg.cn/large/806e3151ly1fycz6n4q9cj20xr0hrac9.jpg",alt:""}})]),t._v(" "),r("ol",[r("li",[t._v("选择配置页面")]),t._v(" "),r("li",[t._v("选择左侧的Repositories")]),t._v(" "),r("li",[t._v("点击Create repository功能")])]),t._v(" "),r("p",[r("img",{attrs:{src:"https://ws1.sinaimg.cn/large/806e3151ly1fycz8kaf4jj20gk0o7ta9.jpg",alt:""}})]),t._v(" "),r("p",[t._v("这样就会看到Nexus 3支持的repository类型。对于Java开发者maven2的应该就很熟悉了。")]),t._v(" "),r("p",[t._v("仔细观察会发现，每一种repository都包含三种类型可以创建, group, hosted,proxy。下面分别对每种做说明：")]),t._v(" "),r("ul",[r("li",[t._v("proxy")])]),t._v(" "),r("p",[t._v("根据proxy名字，就可以想象的出这种类型的repository是用来坐代理的。比如我们在建Maven私服，需要和中央库连通，此时就需要用proxy来创建repository。见Nexus模式的maven-central库。")]),t._v(" "),r("ul",[r("li",[t._v("hosted")])]),t._v(" "),r("p",[t._v("这种repository可以简单的理解为用于私有的，内部的repository。我们工作中开发的一些工具，组件库等不方便放到中央库，但是却又需要在公司内部共享，就需要创建hosted类型的repository，用于发布公司内部的组件。见maven-releases, maven-snapshots。")]),t._v(" "),r("ul",[r("li",[t._v("group")])]),t._v(" "),r("p",[t._v("最后来说说group类型。其实这种类型是一种虚拟的repository，用于将proxy和hosted类型的repository组合成一个，方便使用者使用。如maven-public, 在里面既包含了maven-central，同时也包含了maven-releases, maven-snapshots,这样，不管是网上中央库的jar包，还是我们自己发布的jar都可以通过maven-public来获取到。")]),t._v(" "),r("p",[t._v("结合maven repository配置的经验，对于npm repository也采用同样的套路配置。")]),t._v(" "),r("ol",[r("li",[t._v("配置proxy库")])]),t._v(" "),r("p",[r("img",{attrs:{src:"https://ws1.sinaimg.cn/large/806e3151ly1fyczoph1jbj20kj0dbdgk.jpg",alt:""}}),t._v("\n在proxy类型的配置界面，发现里面的Name、Remote storage是必填的。Name可以随便填。Remote storage需要填类似maven中央库的地址，这里npm的选择淘宝的私服地址"),r("code",[t._v("https://registry.npm.taobao.org")])]),t._v(" "),r("ol",{attrs:{start:"2"}},[r("li",[t._v("配置hosted库\n"),r("img",{attrs:{src:"https://ws1.sinaimg.cn/large/806e3151ly1fyczsmhcnbj20is0i6wf5.jpg",alt:""}})])]),t._v(" "),r("p",[t._v("hosted库配置比较简单，只需要填写name就可以了。")]),t._v(" "),r("ol",{attrs:{start:"3"}},[r("li",[t._v("配置Group库")])]),t._v(" "),r("p",[r("img",{attrs:{src:"https://ws1.sinaimg.cn/large/806e3151ly1fycztxee51j20l50l1mxw.jpg",alt:""}})]),t._v(" "),r("p",[t._v("在group配置中，name同样是必须的。此外还多了一个members的配置，将左侧的npm-hosted,npm-proxy添加到右侧的members中，这样就可以通过group同时访问npm-hosted,npm-proxy中的资源了。")]),t._v(" "),r("h1",{attrs:{id:"发布到npm私服"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#发布到npm私服"}},[t._v("#")]),t._v(" 发布到npm私服")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://ws1.sinaimg.cn/large/806e3151ly1fyczztbu5ij20k009jgp4.jpg",alt:""}})]),t._v(" "),r("p",[t._v("首先，需要配置权限，将npm Bearer Token Realm启用。")]),t._v(" "),r("p",[t._v("配置本机的npm登陆")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("npm login --registry=http://localhost:8888/repository/npm-hosted/\n")])])]),r("p",[t._v("然后输入用户名密码，邮箱，成功后会在"),r("code",[t._v(".npmrc")]),t._v("文件中生成一条记录")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("//localhost:8888/repository/npm-hosted/:_authToken=NpmToken.16b06a38-cae5-32ca-8a5f-2310ef16e156\n")])])]),r("p",[t._v("在确保项目有 package.json 前提下，执行：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("npm publish  --registry=http://localhost:8888/repository/npm-hosted/\n\n")])])]),r("p",[t._v("即可在私服中查询到已发的npm组件\n"),r("img",{attrs:{src:"https://ws1.sinaimg.cn/large/806e3151ly1fyd02la9jnj21h60ez3zv.jpg",alt:""}})]),t._v(" "),r("hr"),t._v(" "),r("blockquote",[r("p",[t._v("Author ：笑笑粑粑"),r("br"),t._v("\n曾用网名：TinyKing"),r("br"),t._v("\n微信公众号：Java码农"),r("br"),t._v("\n知乎专栏： "),r("a",{attrs:{href:"https://zhuanlan.zhihu.com/tinyking",target:"_blank",rel:"noopener noreferrer"}},[t._v("爱笑笑爱分享"),r("OutboundLink")],1),r("br"),t._v("\n个人博客： "),r("a",{attrs:{href:"https://www.wangjianchao.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("爱笑笑，爱生活"),r("OutboundLink")],1),r("br"),t._v("\n自我评价： 一个爱好广泛的CRUD程序猿 ^_^")])])])}),[],!1,null,null,null);e.default=a.exports}}]);